# Apply/Destroy

terraform apply -var-file=.tfvars
terraform destroy -var-file=.tfvars

# Output configs 

terraform output -raw kubeconfig > ~/.kube/config
terraform output -raw talosconfig > ~/.talos/config

# Configure kubeconfig with tailscale auth, device name defaults to "tailscale-operator"

tailscale configure kubeconfig <device_name>

# Machine logs

talosctl -n <nodeIp> dmesg
talosctl -n <nodeIp> dmesg | grep error

# Bootstrap flux

export GITHUB_TOKEN=<your_personal_access_token>
export GITHUB_USER=<your_github_username>

flux bootstrap github \
  --token-auth=false \
  --owner=$GITHUB_USER \
  --repository=ops \
  --branch=main \
  --path=./clusters/production \
  --read-write-key=true \
  --components-extra='image-reflector-controller,image-automation-controller' \
  --personal

